# 📖 统一大纲系统使用指南

## 🎯 核心理念

**一个工具，四种模式，满足所有需求！**

现在所有的大纲配置都通过 `./novel.sh new` 完成，不再需要单独运行 `outline` 命令。

---

## 🚀 快速开始

```bash
./novel.sh new
```

然后选择你需要的模式：

### 模式 1：简易模式（推荐新手）
- 只需输入梗概
- AI 在生成时自动规划
- 最快速启动

### 模式 2：AI 自动生成（推荐大多数情况）⭐
- AI 生成完整总纲（主目标、冲突、成长弧）
- AI 生成卷纲（每卷25章，包含关键事件）
- 自动转换为新格式保存到 `outline.yaml`
- 可以后续手动调整

### 模式 3：完全自定义（推荐有明确构思）
- 手动输入所有内容
- 自定义阶段数量（3-15个）
- 自定义每卷章节数
- 完全可控

### 模式 4：导入大纲（开发中）
- 从文件导入现有大纲
- 即将支持

---

## 📊 四种模式详细对比

| 模式 | 速度 | 控制 | AI依赖 | 适合场景 |
|------|------|------|--------|----------|
| **1. 简易** | ⚡⚡⚡ | ⭐ | 中 | 快速测试、短篇 |
| **2. AI生成** | ⚡⚡ | ⭐⭐ | 高 | 中长篇、平衡 |
| **3. 完全自定义** | ⚡ | ⭐⭐⭐ | 无 | 长篇、精确控制 |
| **4. 导入** | ⚡⚡⚡ | ⭐⭐⭐ | 无 | 已有大纲 |

---

## 🎬 完整工作流示例

### 示例 A：中篇玄幻小说（100章）

```bash
# 1. 创建项目
./novel.sh new

# 选择：
#   大纲模式: 2 (AI 自动生成)
#   标题: 修仙之路
#   类型: 玄幻
#   章节: 100
#   梗概: 少年从废材逆袭，获得神秘传承...
#   [AI 开始生成大纲...]
#   角色: 叶凡, 25岁, 修仙者...
#   风格: 1 (番茄爽文)

# 2. 开始生成
./novel.sh generate
```

**结果**：
- ✅ AI 生成了 4 卷大纲
- ✅ 每卷包含关键事件和伏笔
- ✅ 保存到 `projects/修仙之路/bible/outline.yaml`
- ✅ Planner 自动使用大纲指引

---

### 示例 B：长篇都市小说（500章，完全自定义）

```bash
# 1. 创建项目
./novel.sh new

# 选择：
#   大纲模式: 3 (完全自定义)
#   标题: 都市修仙传
#   章节: 500
#
#   【总纲】
#   主目标: 主角回到都市，建立修仙帝国
#   主冲突: 修仙界与世俗界的冲突
#   成长线: 从普通人到修仙至尊
#
#   【阶段划分】
#   阶段1: 开局 (1-50章) - 获得系统，初步成长
#   阶段2: 崛起 (51-150章) - 建立势力，收服强者
#   阶段3: 称霸 (151-300章) - 统一都市修仙界
#   阶段4: 突破 (301-450章) - 进入更高层次
#   阶段5: 终局 (451-500章) - 成就至尊
#
#   【卷纲】
#   第1卷: 废柴崛起 (1-30章)
#   第2卷: 初露锋芒 (31-60章)
#   ...

# 2. 开始生成
./novel.sh generate
```

**结果**：
- ✅ 完全按照你的规划生成
- ✅ 每个阶段都有明确目标
- ✅ 章节分配完全可控

---

### 示例 C：短篇悬疑小说（20章，简易模式）

```bash
# 1. 创建项目
./novel.sh new

# 选择：
#   大纲模式: 1 (简易)
#   标题: 密室之谜
#   章节: 20
#   梗概: 侦探接到神秘委托，调查连环失踪案...

# 2. 直接生成
./novel.sh generate
```

**结果**：
- ✅ 无需配置大纲
- ✅ AI 根据梗概自由发挥
- ✅ 最快启动

---

## 🔧 高级用法

### 手动编辑 AI 生成的大纲

AI 生成后，如果想调整���

```bash
# 1. 找到大纲文件
vim projects/你的项目名/bible/outline.yaml

# 2. 编辑内容
# 修改阶段、卷目标、关键事件等

# 3. 保存后继续生成
./novel.sh generate
```

---

### 查看当前大纲

```bash
cat projects/你的项目名/bible/outline.yaml
```

或使用 `yq`（如果安装了）：
```bash
yq . projects/你的项目名/bible/outline.yaml
```

---

### 为现有项目添加大纲

如果已经创建了项目，但没有大纲：

```bash
# 方法 1：手动创建 outline.yaml
vim projects/你的项目名/bible/outline.yaml

# 方法 2：使用旧的 generate_outline.py（兼容性）
python3 generate_outline.py
```

---

## 📁 大纲文件格式

### 完整示例

```yaml
outline:
  synopsis: "少年从废材逆袭，获得神秘传承，踏上逆天修炼之路"
  main_goal: "成为修仙至尊，揭开身世之谜"
  main_conflict: "主角与暗黑势力的对抗"
  protagonist_arc: "从废材到至尊的蜕变"
  phases:
    - name: "开局阶段"
      goal: "获得传承，初步成长"
      chapters: "1-20"
    - name: "发展阶段"
      goal: "建立势力，收服强者"
      chapters: "21-60"
    - name: "高潮阶段"
      goal: "决战暗黑势力"
      chapters: "61-100"

volumes:
  - volume: 1
    title: "废材逆袭"
    chapters: "1-25"
    core_goal: "获得传承，打脸嘲讽者"
    key_events:
      - "获得神秘传承"
      - "第一次战斗获胜"
      - "结识红颜知己"
    foreshadowing:
      - "暗黑势力的线索"
      - "主角身世的暗示"
    ending_state: "初步站稳脚跟"

  - volume: 2
    title: "崭露头角"
    chapters: "26-50"
    core_goal: "参加大比，证明实力"
    key_events:
      - "参加宗门大比"
      - "击败天才弟子"
      - "获得重宝"
    foreshadowing:
      - "更强大的敌人"
    ending_state: "成为宗门核心弟子"
```

---

## ❓ 常见问题

### Q: 我应该选择哪个模式？

**推荐：**
- **短篇（<50章）**：模式 1 简易
- **中篇（50-200章）**：模式 2 AI 生成
- **长篇（>200章）**：模式 3 完全自定义

### Q: AI 生成的大纲不满意怎么办？

1. 手动编辑 `outline.yaml`
2. 或者重新运行 `./novel.sh new`，选择模式 3 自定义

### Q: 可以不用大纲吗？

可以！选择模式 1（简易），AI 会根据梗概自由发挥。

### Q: 旧的 `outline` 命令还能用吗？

可以用，但推荐使用新方式：
- 旧方式：`./novel.sh outline`
- 新方式：`./novel.sh new` → 选择模式 2

### Q: generate_outline.py 还需要吗？

不需要了，所有功能都整合到 `configure_novel_advanced.py` 了。

---

## 🎉 总结

**新的统一系统优势：**
- ✅ 一个命令搞定所有配置
- ✅ 四种模式满足不同需求
- ✅ AI 生成 + 手动调整 = 最佳体验
- ✅ 统一的文件格式（outline.yaml）
- ✅ 向后兼容旧格式

**现在开始：**
```bash
./novel.sh new
```

选择你喜欢的模式，开始创作吧！🚀
